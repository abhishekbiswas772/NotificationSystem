# ===========================================
# Notification System - Environment Variables
# ===========================================

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# PostgreSQL connection string
# Format: postgres://username:password@host:port/database?sslmode=disable
DATABASE_URL=postgres://postgres:password@localhost:5432/notification_system?sslmode=disable

# Alternative individual database settings (if not using DATABASE_URL)
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=notification_system
DB_SSLMODE=disable

# ===========================================
# REDIS CONFIGURATION
# ===========================================
# Redis connection settings
REDIS_ADDR=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# ===========================================
# SERVER CONFIGURATION
# ===========================================
# Server port
PORT=8080

# Gin mode: debug, release, test
GIN_MODE=debug

# Number of worker threads for processing notifications
WORKER_COUNT=5

# ===========================================
# SENDGRID CONFIGURATION (Email Provider)
# ===========================================
# Get your API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.your-sendgrid-api-key-here

# Default sender email (optional)
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME=Your App Name

# ===========================================
# TWILIO CONFIGURATION (SMS Provider)
# ===========================================
# Get credentials from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your-twilio-auth-token-here
TWILIO_FROM_NUMBER=+1234567890

# ===========================================
# FIREBASE CLOUD MESSAGING (Push Notifications)
# ===========================================
# Get server key from Firebase Console
FCM_SERVER_KEY=your-fcm-server-key-here
FCM_PROJECT_ID=your-firebase-project-id

# Path to Firebase service account JSON file
FCM_CREDENTIALS_FILE=./config/firebase-credentials.json

# ===========================================
# AUTHENTICATION & SECURITY
# ===========================================
# JWT secret for token signing
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT token expiration (in hours)
JWT_EXPIRATION_HOURS=24

# API key encryption secret
API_KEY_SECRET=your-api-key-encryption-secret

# ===========================================
# RATE LIMITING
# ===========================================
# Rate limit: requests per minute per user
RATE_LIMIT_PER_MINUTE=100

# Rate limit: requests per day per user
RATE_LIMIT_PER_DAY=10000

# ===========================================
# RETRY CONFIGURATION
# ===========================================
# Maximum retry attempts for failed notifications
MAX_RETRY_ATTEMPTS=5

# Base delay for exponential backoff (in seconds)
RETRY_BASE_DELAY=60

# Maximum delay for exponential backoff (in seconds)
RETRY_MAX_DELAY=3600

# ===========================================
# DEAD LETTER QUEUE (DLQ) CONFIGURATION
# ===========================================
# Days to keep resolved DLQ entries before cleanup
DLQ_RETENTION_DAYS=30

# ===========================================
# SCHEDULER CONFIGURATION
# ===========================================
# Enable/disable scheduler
SCHEDULER_ENABLED=true

# Cron schedule for processing retries (default: every 1 minute)
SCHEDULER_RETRY_CRON=@every 1m

# Cron schedule for DLQ cleanup (default: daily at midnight)
SCHEDULER_DLQ_CLEANUP_CRON=@daily

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=json

# Enable request logging
LOG_REQUESTS=true

# ===========================================
# MONITORING & OBSERVABILITY
# ===========================================
# Enable Prometheus metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9090

# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Sentry environment
SENTRY_ENVIRONMENT=development

# ===========================================
# WEBHOOK CONFIGURATION
# ===========================================
# Webhook timeout (in seconds)
WEBHOOK_TIMEOUT=10

# Maximum webhook retry attempts
WEBHOOK_MAX_RETRIES=3

# ===========================================
# NOTIFICATION PREFERENCES
# ===========================================
# Default notification preferences for new users
DEFAULT_EMAIL_ENABLED=true
DEFAULT_SMS_ENABLED=true
DEFAULT_PUSH_ENABLED=true

# Default frequency cap (notifications per day, 0 = unlimited)
DEFAULT_FREQUENCY_CAP=100

# ===========================================
# CORS CONFIGURATION
# ===========================================
# Allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ===========================================
# PRODUCTION SETTINGS (Uncomment for production)
# ===========================================
# GIN_MODE=release
# LOG_LEVEL=warn
# SENTRY_ENVIRONMENT=production
# DB_SSLMODE=require

# ===========================================
# OPTIONAL: AWS CONFIGURATION
# ===========================================
# For AWS SES (Alternative email provider)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# For AWS SNS (Alternative SMS provider)
# AWS_SNS_REGION=us-east-1

# ===========================================
# OPTIONAL: REDIS SENTINEL (High Availability)
# ===========================================
# REDIS_SENTINEL_ENABLED=false
# REDIS_SENTINEL_MASTER_NAME=mymaster
# REDIS_SENTINEL_ADDRS=localhost:26379,localhost:26380,localhost:26381

# ===========================================
# OPTIONAL: DATABASE POOLING
# ===========================================
# DB_MAX_OPEN_CONNS=25
# DB_MAX_IDLE_CONNS=5
# DB_CONN_MAX_LIFETIME=5m

# ===========================================
# DEVELOPMENT SETTINGS
# ===========================================
# Enable hot reload (for development)
HOT_RELOAD=true

# Mock providers (use mock providers instead of real ones)
USE_MOCK_PROVIDERS=false
